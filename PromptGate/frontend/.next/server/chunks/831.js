exports.id=831,exports.ids=[831],exports.modules={4013:(e,t,r)=>{"use strict";r.d(t,{I:()=>c,w:()=>AppProvider});var s=r(997),a=r(6689),i=r(6749);let l={apikey:"",credits:0,promptLoading:!1,accountLoading:!1,stats:{breaches:{total:0,user:0},detections:0,requests:0}},c=(0,a.createContext)({appState:l,promptLoading:!1,accountLoading:!1,attempts:[],refreshAppState:async()=>void 0,refreshApikey:async()=>void 0,submitPrompt:async e=>void 0,setPromptLoading:()=>null}),AppProvider=({children:e})=>{let[t,r]=(0,a.useState)(l),[n,o]=(0,a.useState)(!1),[d,x]=(0,a.useState)(!1),[h,m]=(0,a.useState)([]),u=(0,i.useSession)(),setApikey=e=>{r(t=>({...t,apikey:e}))},refreshAppState=async()=>{x(!0);try{let e=await fetch("/api/account"),t=await e.json();r(t)}catch(e){console.error(e)}finally{x(!1)}};(0,a.useEffect)(function(){u&&refreshAppState()},[u]);let setStats=e=>{r(t=>({...t,stats:e}))},refreshStats=async()=>{x(!0);try{let e=await fetch("/api/account/stats"),t=await e.json();if(!t)return;t?.breaches?.total,setStats(t)}catch(e){console.error(e)}finally{x(!1)}},refreshApikey=async()=>{o(!0);try{let e=await fetch("/api/account/apikey",{method:"POST"}),t=await e.json();setApikey(t.apikey)}catch(e){console.error(e)}finally{o(!1)}},submitPrompt=async e=>{o(!0);try{let t=JSON.stringify(e),r=await fetch("/api/playground",{method:"POST",headers:{"Content-Type":"application/json"},body:t}),s=await r.json(),{detection:a={runHeuristicCheck:!1,runLanguageModelCheck:!1,runVectorCheck:!1,vectorScore:{},heuristicScore:0,modelScore:0,maxHeuristicScore:0,maxModelScore:0,maxVectorScore:0,injectionDetected:!1},output:i="",breach:l=!1,canary_word:c="",canary_word_leaked:n}=s;m(t=>[{error:null,timestamp:new Date,input:e.userInput||"",breach:l,detection:a,output:i||"",canary_word:"",canary_word_leaked:n},...t])}catch(t){m(r=>[{error:t,timestamp:new Date,input:e.userInput||"",breach:!1,detection:{runHeuristicCheck:!1,runLanguageModelCheck:!1,runVectorCheck:!1,vectorScore:{},heuristicScore:0,modelScore:0,maxHeuristicScore:0,maxModelScore:0,maxVectorScore:0,injectionDetected:!1},output:"",canary_word:"",canary_word_leaked:!1},...r])}finally{refreshStats(),o(!1)}};return s.jsx(c.Provider,{value:{appState:t,promptLoading:n,accountLoading:d,attempts:h,refreshAppState,refreshApikey,submitPrompt,setPromptLoading:o},children:e})}},7508:(e,t,r)=>{"use strict";r.d(t,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var s=r(997),a=r(6689),i=r(2247),l=r(7283),c=r(3490),n=r(8457),o=r(1664),d=r.n(o),x=r(6749),h=r(4013);let __WEBPACK_DEFAULT_EXPORT__=()=>{let e=(0,x.useSupabaseClient)(),t=(0,x.useSession)(),{appState:r,accountLoading:o,setPromptLoading:m}=(0,a.useContext)(h.I),[u,p]=(0,a.useState)(!1);return(0,s.jsxs)("nav",{className:"flex w-full flex-col md:flex-row",children:[(0,s.jsxs)("div",{className:"flex w-full justify-between md:justify-center md:w-fit",children:[s.jsx(d(),{className:"no-underline text-black",href:"/",children:(0,s.jsxs)("div",{className:"flex gap-4 pb-2 justify-center items-center",children:[s.jsx("img",{className:"w-20 rounded-md",src:"/logo.png"}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex flex-row items-start",children:[s.jsx(i.Title,{order:4,children:"Rebuff Playground"}),s.jsx("span",{className:"bg-yellow-100 text-yellow-800 text-xs font-medium ml-2 px-2.5 py-0.5 rounded border border-yellow-300",children:"Alpha"})]}),s.jsx(i.Text,{fz:"sm",children:"Prompt Injection Detector"})]})]})}),s.jsx("button",{onClick:()=>p(!u),className:"inline-flex md:hidden text-black text-sm text-center items-center bg-transparent border-none cursor-pointer",children:u?s.jsx(l.Z,{}):s.jsx(c.Z,{})})]}),(0,s.jsxs)("div",{className:`${u?"flex":"hidden"} bg-gray-100 p-2 shadow-md justify-between items-center flex-grow flex-row gap-4 md:flex md:shadow-none md:p-0 md:bg-transparent md:gap-0`,children:[(0,s.jsxs)("div",{className:"flex items-center justify-end md:justify-end gap-2 mr-2 flex-grow",children:[s.jsx("a",{href:"#add-to-app",className:"no-underline",children:s.jsx("div",{className:"p-2 border border-black border-solid cursor-pointer hover:bg-black hover:text-white rounded font-semibold text-black text-sm",children:s.jsx(i.Text,{children:"Add to my app"})})}),t&&s.jsx(s.Fragment,{children:s.jsx(i.Text,{className:"font-semibold text-sm",children:o?s.jsx(i.Loader,{color:"gray",variant:"dots"}):`Credits: ${"number"!=typeof r.credits?"":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(r.credits/1e3)}`})})]}),s.jsx("div",{className:"flex gap-2 items-end  md:justify-end ",children:t&&s.jsx(i.Text,{className:"text-black no-underline",onClick:async()=>{m(!1);try{let{error:t}=await e.auth.signOut();t&&console.log("Error logging out:",t.message)}catch(e){console.log("Error logging out:",e)}finally{m(!1)}},children:(0,s.jsxs)("div",{className:"flex flex-row items-center cursor-pointer",children:[s.jsx(n.Z,{}),s.jsx(i.Text,{className:"font-semibold text-sm",children:"Logout"})]})})})]})]})}},5831:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>App});var s=r(997),a=r(968),i=r.n(a),l=r(2247);r(7501);var c=r(4001),n=r(6749),o=r(6689),d=r(7508);let components_SocialIcons=()=>{let e=`
    .hover\\:fill-current:hover {
      fill: currentColor;
    }
  `;return(0,s.jsxs)("div",{className:"px-2 flex gap-2 justify-center",children:[s.jsx("style",{children:e}),s.jsx("a",{href:"https://twitter.com/rebuff_ai","alt-text":"Twitter",target:"_blank",className:"text-black inline-block hover:text-blue-500",children:(0,s.jsxs)("svg",{className:"w-6 h-6 fill-current hover:fill-current",role:"img",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[s.jsx("title",{children:"Twitter"}),s.jsx("path",{d:"M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"})]})}),s.jsx("a",{href:"https://github.com/woop/rebuff","alt-text":"Github",target:"_blank",className:"text-black inline-block hover:text-blue-500",children:(0,s.jsxs)("svg",{className:"w-6 h-6 fill-current hover:fill-current",role:"img",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[s.jsx("title",{children:"GitHub"}),s.jsx("path",{d:"M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"})]})}),s.jsx("a",{href:"https://discord.gg/cvp79vytu","alt-text":"Discord",target:"_blank",className:"text-black inline-block hover:text-blue-500",children:(0,s.jsxs)("svg",{className:"w-6 h-6 fill-current hover:fill-current",role:"img",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[s.jsx("title",{children:"Discord"}),s.jsx("path",{d:"M20.317 4.3698a19.7913 19.7913 0 00-4.8851-1.5152.0741.0741 0 00-.0785.0371c-.211.3753-.4447.8648-.6083 1.2495-1.8447-.2762-3.68-.2762-5.4868 0-.1636-.3933-.4058-.8742-.6177-1.2495a.077.077 0 00-.0785-.037 19.7363 19.7363 0 00-4.8852 1.515.0699.0699 0 00-.0321.0277C.5334 9.0458-.319 13.5799.0992 18.0578a.0824.0824 0 00.0312.0561c2.0528 1.5076 4.0413 2.4228 5.9929 3.0294a.0777.0777 0 00.0842-.0276c.4616-.6304.8731-1.2952 1.226-1.9942a.076.076 0 00-.0416-.1057c-.6528-.2476-1.2743-.5495-1.8722-.8923a.077.077 0 01-.0076-.1277c.1258-.0943.2517-.1923.3718-.2914a.0743.0743 0 01.0776-.0105c3.9278 1.7933 8.18 1.7933 12.0614 0a.0739.0739 0 01.0785.0095c.1202.099.246.1981.3728.2924a.077.077 0 01-.0066.1276 12.2986 12.2986 0 01-1.873.8914.0766.0766 0 00-.0407.1067c.3604.698.7719 1.3628 1.225 1.9932a.076.076 0 00.0842.0286c1.961-.6067 3.9495-1.5219 6.0023-3.0294a.077.077 0 00.0313-.0552c.5004-5.177-.8382-9.6739-3.5485-13.6604a.061.061 0 00-.0312-.0286zM8.02 15.3312c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9555-2.4189 2.157-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.9555 2.4189-2.1569 2.4189zm7.9748 0c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9554-2.4189 2.1569-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.946 2.4189-2.1568 2.4189Z"})]})})]})},components_Layout=({children:e})=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(i(),{children:[s.jsx("title",{children:"Rebuff Playground"}),s.jsx("meta",{property:"og:title",content:"Rebuff Playground"},"title")]}),(0,s.jsxs)("div",{className:"min-h-screen p-4 flex flex-col justify-center items-center max-w-screen-xl mx-auto",children:[s.jsx(d.Z,{}),s.jsx("main",{className:"flex-grow w-full",children:e}),s.jsx("footer",{className:"w-full text-gray-500",children:(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{className:"text-left",children:["\xa9 ",new Date().getFullYear()]}),(0,s.jsxs)("div",{children:["Made by"," ",s.jsx("a",{href:"https://twitter.com/willpienaar",target:"_blank",children:"@willpienaar"})," ","and"," ",s.jsx("a",{href:"https://twitter.com/shrumm",target:"_blank",children:"@shrumm"})]}),(0,s.jsxs)("div",{className:"flex flex-row justify-right items-center",children:[s.jsx("div",{className:"text-sm",children:"Questions? Get in touch."}),s.jsx(components_SocialIcons,{})]})]})})]})]});var x=r(4013);function App(e){let{Component:t,pageProps:r}=e,[a]=(0,o.useState)(()=>(0,c.createBrowserSupabaseClient)());return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(i(),{children:[s.jsx("title",{children:"Page title"}),s.jsx("meta",{name:"viewport",content:"minimum-scale=1, initial-scale=1, width=device-width"})]}),s.jsx(l.MantineProvider,{withGlobalStyles:!0,withNormalizeCSS:!0,theme:{colorScheme:"light"},children:s.jsx(n.SessionContextProvider,{supabaseClient:a,initialSession:r.initialSession,children:s.jsx(x.w,{children:s.jsx(components_Layout,{children:s.jsx(t,{...r})})})})})]})}},7501:()=>{}};